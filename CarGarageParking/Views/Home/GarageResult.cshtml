
@model IEnumerable<CarGarageParking.Models.Garage>

    @{
        ViewData["Title"] = "Available garages";
    }

@if (ViewBag.ErrorMessage != null)
{
    <div class="alert alert-danger">@ViewBag.ErrorMessage</div>
}
@if (ViewBag.SuccessMessage != null)
{
    <div class="alert alert-success">@ViewBag.SuccessMessage</div>
}
@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
}
@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">@TempData["SuccessMessage"]</div>
}

<h3>Current Time: <span id="currentTime"></span></h3>


    <div class="garage-container">
        <div>
            @foreach(Garage garage in Model)
             {
              <div class="garage-card">
                <h2>@garage.Name</h2>
                <h3>@garage.Location</h3>
                <h3>@garage.AvailableSpots</h3>
                <a href="@Url.Action("EnterVehicleDetails","Home", new { id = garage.GarageId} )" class="btn btn-primary">Select a garage to enter</a>
              </div>                
              }
        </div>
    </div>

    <a href="@Url.Action("Index","Home")" class="btn btn-danger">Cancel all and go to home page</a>
    <a href="@Url.Action("EnterVehicle","Home")" class="btn btn-warning">Back to search a new garage</a>

    <style>
        .garage-card{
            border:1px solid black;   
            margin: 20px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
        }

        .btn {
            margin: 10px 5px;
        }

        .alert {
            margin: 20px 0;
            padding: 15px;
            border-radius: 5px;
        }

        .alert-danger {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
</style>
        
<script>
    function updateTime() {
        var now = new Date();
        document.getElementById("currentTime").innerText = now.toLocaleTimeString();
    }

    setInterval(updateTime, 1000); 
    updateTime(); 
</script>